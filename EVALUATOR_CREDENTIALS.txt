# EVALUATOR SETUP - All Credentials Included

## ğŸ“ For Teaching Assistants / Evaluators

> **IMPORTANT NOTE**: Most credentials are already configured in the project files for your convenience. You only need to create ONE file manually (Firebase service account JSON - see below).

### Why Most Credentials Are Included

**For ease of evaluation**, we have included credentials directly in the configuration files:
- `backend/src/main/resources/application.properties` - MongoDB, Redis config âœ…
- `frontend/.env` - Firebase web config âœ…

**This is intentionally done to:**
1. Save evaluator time - minimal account creation
2. Ensure consistent testing environment
3. Make evaluation process smooth and quick
4. Focus on code quality rather than setup complexity

**Security Note**: These credentials will be removed from the repository after evaluation. They are temporary evaluation credentials with limited access.

---

## âš ï¸ ONE MANUAL STEP REQUIRED - Firebase Service Account

**File needed:** `backend/src/main/resources/firebase_service.json`

This file cannot be committed to GitHub for security reasons. Please create it manually.
 
A template file is included in the repo: `firebase_service.json.template`

## ğŸ”‘ FIREBASE SERVICE ACCOUNT CREDENTIALS

**Replace these in `firebase_service.json`:** with actual values from the Firebase Service Account Credentials that you create.

```
project_id: [YOUR_ACTUAL_PROJECT_ID]
private_key_id: [YOUR_ACTUAL_PRIVATE_KEY_ID]
private_key: [YOUR_ACTUAL_PRIVATE_KEY - INCLUDING -----BEGIN/END LINES-----]
client_email: [YOUR_ACTUAL_CLIENT_EMAIL]
client_id: [YOUR_ACTUAL_CLIENT_ID]
client_x509_cert_url: [YOUR_ACTUAL_CERT_URL]
```

> **Note:** Paste the complete private_key including the `-----BEGIN PRIVATE KEY-----` and `-----END PRIVATE KEY-----` lines. The key should have `\n` characters for line breaks in the JSON.

## ğŸš€ Quick Start (2 Minutes Setup)

### Prerequisites (Must be installed):
- **Java 21** ([Download](https://www.oracle.com/java/technologies/downloads/#java21))
- **Maven 3.6+** ([Download](https://maven.apache.org/download.cgi))
- **Node.js v16+** ([Download](https://nodejs.org/))

### Setup Steps:

**1. Clone Repository**
```bash
git clone https://github.com/YashGupta2106/Shatranj_Art_Of_War.git
cd Shatranj_Art_Of_War
```

**2. Create Firebase Service Account File** âš ï¸ **REQUIRED**
```bash
cd backend/src/main/resources

# Windows:
notepad firebase_service.json

# Mac/Linux:
nano firebase_service.json
```

Paste the JSON from "Firebase Service Account Credentials" section above, replacing all `[YOUR_ACTUAL_...]` placeholders with real values.

**3. Run Backend**
```bash
cd backend  # (or cd ../../.. from resources folder)
mvn clean install
mvn spring-boot:run

# Wait for: "Started DemoApplication in X.XXX seconds"
# Backend runs on http://localhost:8080
```

**4. Run Frontend** (in new terminal)
```bash
cd frontend
npm install
npm start

# Opens browser at http://localhost:3000
```

**5. Run Tests** (to verify)
```bash
cd backend
mvn test

# Expected: Tests run: 59, Failures: 0, Errors: 0
```

---

## ğŸ® Testing the Application

### âš ï¸ CRITICAL: You MUST Use Two Different Browsers!

> **DO NOT use Incognito/Private mode** - JWT tokens won't persist!

**How to Test Gameplay:**
```
1. Browser 1 (Chrome):   http://localhost:3000 â†’ Login as guptaji@gmail.com
2. Browser 2 (Firefox):  http://localhost:3000 â†’ Login as ash@gmail.com
3. Both click "Find Match"
4. Game starts - make moves and see them sync in real-time!
```

**Pre-configured Test Accounts:**
- **Account 1**: `guptaji@gmail.com` / Password: `guptaji`
- **Account 2**: `ash@gmail.com` / Password: `guptaji`

**Why Two Browsers?**
- âŒ Same browser = Session conflict
- âŒ Incognito mode = JWT tokens won't persist (login will fail!)
- âœ… Two different browsers (Chrome + Firefox) = Works perfectly!

---

## ğŸ“Š What's Already Configured

### Backend (application.properties) âœ…
- MongoDB Atlas (Cloud database) - **Already configured**
- Firebase project ID - **Already configured**
- Redis Cloud (Session management) - **Already configured**
- CORS settings - **Already configured**

### Frontend (.env) âœ…
- Firebase web app configuration - **Already configured**
- Backend API URLs - **Already configured**
- WebSocket URLs - **Already configured**

### Only This Needs Manual Setup:
- âš ï¸ Firebase service account JSON file (security - can't commit to GitHub)

---

## ğŸ§ª Running Tests

```bash
cd backend
mvn test

# Expected Output:
# Tests run: 59, Failures: 0, Errors: 0, Skipped: 1
# BUILD SUCCESS
```

**Generate Coverage Report:**
```bash
mvn test jacoco:report

# Open: backend/target/site/jacoco/index.html
# Expected coverage: 65-70%
```

---

## ğŸ› Troubleshooting

**"Cannot initialize Firebase"**
```
Problem: Missing or incorrect firebase_service.json
Solution: 
1. Check file exists: backend/src/main/resources/firebase_service.json
2. Verify JSON is valid (no trailing commas, proper quotes)
3. Ensure all credentials are filled in (no [YOUR_ACTUAL_...] placeholders)
4. Check private_key includes -----BEGIN/END----- lines
```

**Backend won't start:**
```bash
# Check Java version (must be 21)
java -version

# Clean and rebuild
mvn clean install
mvn spring-boot:run
```

**Frontend won't start:**
```bash
# Delete node_modules and reinstall
rm -rf node_modules
npm install
npm start
```

**Tests failing:**
```bash
# Should pass without Firebase (uses mocks)
mvn clean test
```

**Can't login:**
- Make sure you're using two DIFFERENT browsers (not incognito)
- Use provided credentials: guptaji@gmail.com / guptaji
- Check firebase_service.json is created correctly

**Matchmaking not working:**
- You need TWO users in TWO different browsers
- Both must click "Find Match" at the same time
- Wait 2-3 seconds for automatic matching

---

## ğŸ“ Summary

**What you need to do:**
1. âœ… Clone repository
2. âš ï¸ **Create `firebase_service.json`** (30 seconds - copy from above)
3. âœ… Run `mvn spring-boot:run` (backend)
4. âœ… Run `npm start` (frontend)
5. âœ… Open two different browsers
6. âœ… Login with provided accounts
7. âœ… Test the game!

**What you DON'T need to do:**
- âŒ Create MongoDB account
- âŒ Create Redis account  
- âŒ Configure environment variables (already done)
- âŒ Register new users (test accounts provided)

**Setup Time: ~2-3 minutes** (including creating firebase_service.json)

---

## ğŸ”’ Security Note

These credentials are:
- Temporary evaluation credentials
- Limited access/quotas
- Will be removed after evaluation
- Included solely for TA convenience

The Firebase service account file is kept separate for security best practices (cannot be committed to version control).

---

**Total Setup Time: ~2-3 minutes** (Java/Maven/Node install time excluded)  
**Everything else works out of the box!**
